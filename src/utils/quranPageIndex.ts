// Quran page index - maps surah numbers and their verses to page numbers
// Based on the standard Madinah Mushaf (604 pages)

// Surah info: [startPage, totalVerses]
const SURAH_INFO: Record<number, [number, number]> = {
  1: [1, 7],      // الفاتحة
  2: [2, 286],   // البقرة
  3: [50, 200],  // آل عمران
  4: [77, 176],  // النساء
  5: [106, 120], // المائدة
  6: [128, 165], // الأنعام
  7: [151, 206], // الأعراف
  8: [177, 75],  // الأنفال
  9: [187, 129], // التوبة
  10: [208, 109], // يونس
  11: [221, 123], // هود
  12: [235, 111], // يوسف
  13: [249, 43],  // الرعد
  14: [255, 52],  // إبراهيم
  15: [262, 99],  // الحجر
  16: [267, 128], // النحل
  17: [282, 111], // الإسراء
  18: [293, 110], // الكهف
  19: [305, 98],  // مريم
  20: [312, 135], // طه
  21: [322, 112], // الأنبياء
  22: [332, 78],  // الحج
  23: [342, 118], // المؤمنون
  24: [350, 64],  // النور
  25: [359, 77],  // الفرقان
  26: [367, 227], // الشعراء
  27: [377, 93],  // النمل
  28: [385, 88],  // القصص
  29: [396, 69],  // العنكبوت
  30: [404, 60],  // الروم
  31: [411, 34],  // لقمان
  32: [415, 30],  // السجدة
  33: [418, 73],  // الأحزاب
  34: [428, 54],  // سبأ
  35: [434, 45],  // فاطر
  36: [440, 83],  // يس
  37: [446, 182], // الصافات
  38: [453, 88],  // ص
  39: [458, 75],  // الزمر
  40: [467, 85],  // غافر
  41: [477, 54],  // فصلت
  42: [483, 53],  // الشورى
  43: [489, 89],  // الزخرف
  44: [496, 59],  // الدخان
  45: [499, 37],  // الجاثية
  46: [502, 35],  // الأحقاف
  47: [507, 38],  // محمد
  48: [511, 29],  // الفتح
  49: [515, 18],  // الحجرات
  50: [518, 45],  // ق
  51: [520, 60],  // الذاريات
  52: [523, 49],  // الطور
  53: [526, 62],  // النجم
  54: [528, 55],  // القمر
  55: [531, 78],  // الرحمن
  56: [534, 96],  // الواقعة
  57: [537, 29],  // الحديد
  58: [542, 22],  // المجادلة
  59: [545, 24],  // الحشر
  60: [549, 13],  // الممتحنة
  61: [551, 14],  // الصف
  62: [553, 11],  // الجمعة
  63: [554, 11],  // المنافقون
  64: [556, 18],  // التغابن
  65: [558, 12],  // الطلاق
  66: [560, 12],  // التحريم
  67: [562, 30],  // الملك
  68: [564, 52],  // القلم
  69: [566, 52],  // الحاقة
  70: [568, 44],  // المعارج
  71: [570, 28],  // نوح
  72: [572, 28],  // الجن
  73: [574, 20],  // المزمل
  74: [575, 56],  // المدثر
  75: [577, 40],  // القيامة
  76: [578, 31],  // الإنسان
  77: [580, 50],  // المرسلات
  78: [582, 40],  // النبأ
  79: [583, 46],  // النازعات
  80: [585, 42],  // عبس
  81: [586, 29],  // التكوير
  82: [587, 19],  // الانفطار
  83: [587, 36],  // المطففين
  84: [589, 25],  // الانشقاق
  85: [590, 22],  // البروج
  86: [591, 17],  // الطارق
  87: [591, 19],  // الأعلى
  88: [592, 26],  // الغاشية
  89: [593, 30],  // الفجر
  90: [594, 20],  // البلد
  91: [595, 15],  // الشمس
  92: [595, 21],  // الليل
  93: [596, 11],  // الضحى
  94: [596, 8],   // الشرح
  95: [597, 8],   // التين
  96: [597, 19],  // العلق
  97: [598, 5],   // القدر
  98: [598, 8],   // البينة
  99: [599, 8],   // الزلزلة
  100: [599, 11], // العاديات
  101: [600, 11], // القارعة
  102: [600, 8],  // التكاثر
  103: [601, 3],  // العصر
  104: [601, 9],  // الهمزة
  105: [601, 5],  // الفيل
  106: [602, 4],  // قريش
  107: [602, 7],  // الماعون
  108: [602, 3],  // الكوثر
  109: [603, 6],  // الكافرون
  110: [603, 3],  // النصر
  111: [603, 5],  // المسد
  112: [604, 4],  // الإخلاص
  113: [604, 5],  // الفلق
  114: [604, 6],  // الناس
};

// Surah names mapping (Arabic without diacritics for matching)
const SURAH_NAMES: Record<string, number> = {
  'الفاتحة': 1,
  'البقرة': 2,
  'آل عمران': 3,
  'النساء': 4,
  'المائدة': 5,
  'الأنعام': 6,
  'الأعراف': 7,
  'الأنفال': 8,
  'التوبة': 9,
  'يونس': 10,
  'هود': 11,
  'يوسف': 12,
  'الرعد': 13,
  'إبراهيم': 14,
  'الحجر': 15,
  'النحل': 16,
  'الإسراء': 17,
  'الكهف': 18,
  'مريم': 19,
  'طه': 20,
  'الأنبياء': 21,
  'الحج': 22,
  'المؤمنون': 23,
  'النور': 24,
  'الفرقان': 25,
  'الشعراء': 26,
  'النمل': 27,
  'القصص': 28,
  'العنكبوت': 29,
  'الروم': 30,
  'لقمان': 31,
  'السجدة': 32,
  'الأحزاب': 33,
  'سبأ': 34,
  'فاطر': 35,
  'يس': 36,
  'الصافات': 37,
  'ص': 38,
  'الزمر': 39,
  'غافر': 40,
  'فصلت': 41,
  'الشورى': 42,
  'الزخرف': 43,
  'الدخان': 44,
  'الجاثية': 45,
  'الأحقاف': 46,
  'محمد': 47,
  'الفتح': 48,
  'الحجرات': 49,
  'ق': 50,
  'الذاريات': 51,
  'الطور': 52,
  'النجم': 53,
  'القمر': 54,
  'الرحمن': 55,
  'الواقعة': 56,
  'الحديد': 57,
  'المجادلة': 58,
  'الحشر': 59,
  'الممتحنة': 60,
  'الصف': 61,
  'الجمعة': 62,
  'المنافقون': 63,
  'التغابن': 64,
  'الطلاق': 65,
  'التحريم': 66,
  'الملك': 67,
  'القلم': 68,
  'الحاقة': 69,
  'المعارج': 70,
  'نوح': 71,
  'الجن': 72,
  'المزمل': 73,
  'المدثر': 74,
  'القيامة': 75,
  'الإنسان': 76,
  'المرسلات': 77,
  'النبأ': 78,
  'النازعات': 79,
  'عبس': 80,
  'التكوير': 81,
  'الانفطار': 82,
  'المطففين': 83,
  'الانشقاق': 84,
  'البروج': 85,
  'الطارق': 86,
  'الأعلى': 87,
  'الغاشية': 88,
  'الفجر': 89,
  'البلد': 90,
  'الشمس': 91,
  'الليل': 92,
  'الضحى': 93,
  'الشرح': 94,
  'التين': 95,
  'العلق': 96,
  'القدر': 97,
  'البينة': 98,
  'الزلزلة': 99,
  'العاديات': 100,
  'القارعة': 101,
  'التكاثر': 102,
  'العصر': 103,
  'الهمزة': 104,
  'الفيل': 105,
  'قريش': 106,
  'الماعون': 107,
  'الكوثر': 108,
  'الكافرون': 109,
  'النصر': 110,
  'المسد': 111,
  'الإخلاص': 112,
  'الفلق': 113,
  'الناس': 114,
};

// Get surah number from name
export function getSurahNumber(name: string): number {
  // Normalize the name by removing common prefixes
  const normalized = name.replace(/^سورة\s*/, '').trim();
  return SURAH_NAMES[normalized] || 0;
}

// Calculate the approximate page for a verse
export function getPageForVerse(surahNumber: number, verseNumber: number): number {
  const surahInfo = SURAH_INFO[surahNumber];
  if (!surahInfo) return 1;
  
  const [startPage, totalVerses] = surahInfo;
  
  // Get end page (next surah's start page - 1)
  const nextSurah = surahNumber + 1;
  const endPage = nextSurah <= 114 ? SURAH_INFO[nextSurah]![0] - 1 : 604;
  
  // Calculate pages for this surah
  const pagesForSurah = endPage - startPage + 1;
  
  // Distribute verses across pages
  const versePosition = (verseNumber - 1) / totalVerses;
  const pageOffset = Math.floor(versePosition * pagesForSurah);
  
  return Math.min(startPage + pageOffset, endPage);
}

// Get page for a ghareeb word based on surah name and verse number
export function getGhareebWordPage(surahName: string, verseNumber: number): number {
  const surahNumber = getSurahNumber(surahName);
  if (surahNumber === 0) return -1;
  return getPageForVerse(surahNumber, verseNumber);
}

// Export surah info for other uses
export { SURAH_INFO, SURAH_NAMES };
